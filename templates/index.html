<!DOCTYPE html>
<html>
<head>
<link href='http://fonts.googleapis.com/css?family=Sigmar+One' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Knewave' rel='stylesheet' type='text/css'>
<style>
body {
	background-color: #964929;
	color: #FFFFFF;
}
#title_box {
	background-color: #4D2F1A;
	width: 100%;
	position: absolute;
	top:0;
	left:0;
	float: left;
	height: 10%;
	padding-left: 1%;
	margin-bottom: 20px;
	-webkit-box-shadow:0 3px 4px rgba(0, 0, 0, 0.8), 0 0 40px rgba(0, 0, 0, 0.2) inset;
    -moz-box-shadow:0 3px 4px rgba(0, 0, 0, 0.8), 0 0 40px rgba(0, 0, 0, 0.2) inset;
    box-shadow:0 3px 4px rgba(0, 0, 0, 0.8), 0 0 40px rgba(0, 0, 0, 0.2) inset;
}
#nav {
	z-index: 1;
	position: relative;
	float: right;
	padding-right: 1%;
	padding-top: 3%;
}

#joke_box {
	padding-top: 10%;
}
h1 {
	font-family: 'Sigmar One', cursive;
	font-size: 30px;
	color: #F7E240;
	width: 100%;
	text-shadow: 0px 0px 0 rgb(195,174,12),1px 1px 0 rgb(152,131,-31),2px 2px 0 rgb(110,89,-73),3px 3px 0 rgb(67,46,-116),4px 4px 0 rgb(25,4,-158),5px 5px 0 rgb(-18,-39,-201), 6px 6px 0 rgb(-60,-81,-243),7px 7px 6px rgba(0,0,0,1),7px 7px 1px rgba(0,0,0,0.5),0px 0px 6px rgba(0,0,0,.2);
}
a {
	font-family: 'Open Sans', sans-serif;
	color: #FFFFFF;
}
p {
	color: #BDAD44;
	font-family: 'Slackey', cursive;
	font-size: 60px;
	text-shadow: 1px 1px #141203;
	padding-top: 25px;
	padding-bottom: 20px;
	text-shadow:0px 0px 0 rgb(165,149,44),1px 1px 0 rgb(150,134,29),2px 2px 0 rgb(136,120,15),3px 3px 0 rgb(122,106,1),4px 4px 0 rgb(107,91,-14),5px 5px 0 rgb(93,77,-28),6px 6px 0 rgb(79,63,-42),7px 7px 0 rgb(64,48,-57),8px 8px 0 rgb(50,34,-71), 9px 9px 0 rgb(36,20,-85),10px 10px 9px rgba(0,0,0,0.6),10px 10px 1px rgba(0,0,0,0.5),0px 0px 9px rgba(0,0,0,.2);
}
button {
	font-family: 'Knewave', cursive;
	font-size: 40px;
	color: #D6B03E;
	border: none;
	border-radius: 15px;
	background-color: #4D2F1A;
	width: 250px;
	-webkit-box-shadow: 0px 0px 0 rgb(54,24,3),1px 1px 0 rgb(49,19,-2),2px 2px 0 rgb(44,14,-7),3px 3px 0 rgb(39,9,-12),4px 4px 0 rgb(33,3,-18),5px 5px 0 rgb(28,-2,-23),6px 6px 0 rgb(23,-7,-28),7px 7px 0 rgb(18,-12,-33),8px 8px 0 rgb(13,-17,-38), 9px 9px 0 rgb(8,-22,-43),10px 10px 9px rgba(0,0,0,0.3),10px 10px 1px rgba(0,0,0,0.5),0px 0px 9px rgba(0,0,0,.2), 0 0 40px rgba(0, 0, 0, 0.2) inset;
    -moz-box-shadow: 0px 0px 0 rgb(54,24,3),1px 1px 0 rgb(49,19,-2),2px 2px 0 rgb(44,14,-7),3px 3px 0 rgb(39,9,-12),4px 4px 0 rgb(33,3,-18),5px 5px 0 rgb(28,-2,-23),6px 6px 0 rgb(23,-7,-28),7px 7px 0 rgb(18,-12,-33),8px 8px 0 rgb(13,-17,-38), 9px 9px 0 rgb(8,-22,-43),10px 10px 9px rgba(0,0,0,0.3),10px 10px 1px rgba(0,0,0,0.5),0px 0px 9px rgba(0,0,0,.2), 0 0 40px rgba(0, 0, 0, 0.2) inset;
    box-shadow: 0px 0px 0 rgb(54,24,3),1px 1px 0 rgb(49,19,-2),2px 2px 0 rgb(44,14,-7),3px 3px 0 rgb(39,9,-12),4px 4px 0 rgb(33,3,-18),5px 5px 0 rgb(28,-2,-23),6px 6px 0 rgb(23,-7,-28),7px 7px 0 rgb(18,-12,-33),8px 8px 0 rgb(13,-17,-38), 9px 9px 0 rgb(8,-22,-43),10px 10px 9px rgba(0,0,0,0.3),10px 10px 1px rgba(0,0,0,0.5),0px 0px 9px rgba(0,0,0,.2), 0 0 40px rgba(0, 0, 0, 0.2) inset;
    text-shadow: 0px 0px 0 rgb(159,121,7),1px 1px 0 rgb(122,84,-30),2px 2px 0 rgb(85,47,-67),3px 3px 0 rgb(48,10,-104), 4px 4px 0 rgb(11,-27,-141),5px 5px 4px rgba(0,0,0,0.3),5px 5px 1px rgba(0,0,0,0.5),0px 0px 4px rgba(0,0,0,.2);
}
button:hover {
	cursor: pointer;
	color: #E3BF54;
}
button:active {
	color: #E3BF54;
	margin-top: 4px;
	margin-left: 4px;
	-webkit-box-shadow: 0px 0px 0 rgb(45,15,-6),1px 1px 0 rgb(36,6,-15),2px 2px 0 rgb(28,-2,-23),3px 3px 0 rgb(19,-11,-32),4px 4px 0 rgb(10,-20,-41),5px 5px 0 rgb(1,-29,-50), 6px 6px 0 rgb(-8,-38,-59),7px 7px 6px rgba(0,0,0,0.3),7px 7px 1px rgba(0,0,0,0.5),0px 0px 6px rgba(0,0,0,.2);
	-moz-box-shadow:0px 0px 0 rgb(45,15,-6),1px 1px 0 rgb(36,6,-15),2px 2px 0 rgb(28,-2,-23),3px 3px 0 rgb(19,-11,-32),4px 4px 0 rgb(10,-20,-41),5px 5px 0 rgb(1,-29,-50), 6px 6px 0 rgb(-8,-38,-59),7px 7px 6px rgba(0,0,0,0.3),7px 7px 1px rgba(0,0,0,0.5),0px 0px 6px rgba(0,0,0,.2);
	box-shadow:0px 0px 0 rgb(45,15,-6),1px 1px 0 rgb(36,6,-15),2px 2px 0 rgb(28,-2,-23),3px 3px 0 rgb(19,-11,-32),4px 4px 0 rgb(10,-20,-41),5px 5px 0 rgb(1,-29,-50), 6px 6px 0 rgb(-8,-38,-59),7px 7px 6px rgba(0,0,0,0.3),7px 7px 1px rgba(0,0,0,0.5),0px 0px 6px rgba(0,0,0,.2);
}
@media screen and (max-width:640px){
    body {
		width: 620px;
	}
	h1 {
		font-size: 80px;
	}
	p {
		font-size: 18px;
	}
	button {
		font-size: 35px;
	}
}
@media screen and (max-width:480px){
    body {
		width: 460px;
	}
	h1 {
		font-size: 60px;
	}
	p {
		font-size: 16px;
	}
	button {
		font-size: 30px;
	}
}
@media screen and (max-width:320px){
    body {
		width: 300px;
	}
	h1 {
		font-size: 40px;
	}
	p {
		font-size: 14px;
	}
	button {
		font-size: 25px;
	}
}
@media screen and (max-width:240px){
    body {;
		width: 220px;
	}
	h1 {
		font-size: 25px;
	}
	p {
		font-size: 12px;
	}
	button {
		font-size: 20px;
	}
}
</style>
</head>
<title>Yo Mama Gen! | Home of the worlds largest collection of Yo Mama jokes!</title>
<body>
	<div id="top_bar">
		<div id="title_box">
  			<h1>YOMAMAGEN.COM</h2>
  		</div>
  		<div id="nav">
	  		<a href="https://github.com/kreamt/yoMamaGen">View Source Code</a> |
			<a>Mobile App (Coming Soon!)</a> |
			<a href="mailto:contact@yomamagen.com">Contact Us</a>
		</div>
  	</div>
  	<div id="joke_box">
	  	<p id="joke">Hi</p>
	</div>
	<button type="button" onclick="getJoke()">GENERATE!</button>
</body>
<script>
	function getJoke() {
		var jokesList = "";
		while (jokesList == "") {
			var page = Math.floor(Math.random() * 106) + 1;
			var xmlHttp = null;
		    xmlHttp = new XMLHttpRequest();
		    xmlHttp.open( "GET", "http://127.0.0.1:5000/api/jokes/?page=" + page, false);
		    xmlHttp.send(null);
		    jokesList = xmlHttp.responseText.toString();
		    jokesList = "{" + jokesList.substring(jokesList.indexOf("[") + 1).replace(/[[\]]/g,"");
		    if (jokesList.length < 5) {
		    	jokesList = "";
		    }
		}
		if (jokesList == "") {
			console.log("no jokes found");
		} else {
			var jokeNumber = Math.floor(Math.random() * 20) + 1;
			var joke = jokesList.split("joke")[jokeNumber];
			var categories = joke.split("categories")[1].replace(/[^\w\s]/gi, "");
			joke = joke.split('"id":')[0];
			joke = joke.substring(4,joke.length - 10)
			document.getElementById("joke").innerHTML = joke;;
		}
	}
</script>
</html>